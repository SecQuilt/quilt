#!/bin/sh
f=/tmp/quilthack_
f+=$(date +%s)
f+=_${RANDOM}
sed 's/|/ /g' | \
awk "{print \"echo \
\"\$1\" \
\"\$2\" \
\"\$3\" \
\"\$4\" \
\"\$5\" \
\"\$6\" \
\"\$7\" \
  \`date --date=\"\$8\" +%s\` \
\"\$9\" \
\"\$10\" \
\"\$11\" \
  \" }" > $f

sh $f | 
awk \
"{print \"{\" \
\"'sIP':\" \"'\"\$1\"',\" \
\"'dIP':\" \"'\"\$2\"',\" \
\"'sPort':\" \"\"\$3\",\" \
\"'dPort':\" \"\"\$4\",\" \
\"'pro':\" \"'\"\$5\"',\" \
\"'packets':\" \"\"\$6\",\" \
\"'bytes':\" \"\"\$7\",\" \
\"'timestamp':\" \"\"\$8\",\" \
\"'duration':\" \"\"\$9\",\" \
\"'eTime':\" \"'\"\$10\"',\" \
\"'sensor':\" \"'\"\$11\"'}\" \
}" | sed "s/localhost/$HOSTNAME/" 
# sed "s/timestamp/foo/"


rm -f $f

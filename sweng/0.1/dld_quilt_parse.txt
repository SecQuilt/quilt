quilt 0.1 quilt_parse design
-----------------------------


Module: quilt_parse

Type: Library

External Dependencies:
    ast

Internal Dependencies:

Prototype:
    protoparser.py 

Responsibilities:
    Manage the parsing of quilt pattern code


Classes:

        
Functions:


    def get_pattern_vars(pattern)
        """
        Parse a pattern string, throw exception if syntax is invalid.
        return the set of variables mentioned in the pattern
        """
        FIXME  see protoparser.py
        # use the ast module, ast.walk() iterator
        # parse the pattern string and return set


    def evaluate_query(querySpec, srcResults):
        """
        Semantically process the source results according to the pattern
        code.  Return the results.
        NOTE: Do not call get_pattern_vars when this is on the callstack
        """

        # try to evaluate the query
            # set querySpec and srcResults (as events) into global scope

            # evaluate the pattern code

            # return results
        # finally
            # remove querySpec and srcResults from globals scope


Notepad:








